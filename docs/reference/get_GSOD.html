<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Download, clean, reformat generate new elements and return a tidy data.frame of GSOD weather data — get_GSOD • GSODR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">GSODR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/GSODR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download, clean, reformat generate new elements and return a tidy data.frame of GSOD weather data</h1>
    </div>

    
    <p>This function automates downloading, cleaning, reformatting of data from
the Global Surface Summary of the Day (GSOD) data provided by the US National
Centers for Environmental Information (NCEI),
<a href = 'https://data.noaa.gov/dataset/global-surface-summary-of-the-day-gsod'>https://data.noaa.gov/dataset/global-surface-summary-of-the-day-gsod</a>,
and elements three new variables; saturation vapour pressure (es) – Actual
vapour pressure (ea) and relative humidity (RH).  Stations reporting a latitude
of &lt; -90 or &gt; 90 or longitude of &lt; -180 or &gt; 180 are removed.  Stations may be
individually checked for number of missing days to assure data quality and
omitting stations with too many missing observations.  All units are converted
to International System of Units (SI), e.g., Fahrenheit to Celsius and inches
to millimetres.  Alternative elevation measurements are supplied for missing
values or values found to be questionable based on the Consultative Group for
International Agricultural Research's Consortium for Spatial Information
group's (CGIAR-CSI) Shuttle Radar Topography Mission 90 metre (SRTM 90m)
digital elevation data based on NASA's original SRTM 90m data.  Further
information on these data and methods can be found on GSODR's GitHub
repository here:
<a href = 'https://github.com/ropensci/GSODR/blob/master/data-raw/fetch_isd-history.md'>https://github.com/ropensci/GSODR/blob/master/data-raw/fetch_isd-history.md</a>.</p>
    

    <pre class="usage"><span class='fu'>get_GSOD</span>(<span class='kw'>years</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>station</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>country</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>dsn</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>filename</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>max_missing</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>agroclimatology</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>CSV</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>GPKG</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>years</th>
      <td><p>Year(s) of weather data to download.</p></td>
    </tr>
    <tr>
      <th>station</th>
      <td><p>Optional. Specify a station or multiple stations for which to
retrieve, check and clean weather data using <code>STNID</code>. The NCEI reports
years for which the data are available. This function checks against these
years. However, not all cases are properly documented and in some cases files
may not exist on the ftp server even though it is indicated that data was
recorded for the station for a particular year. If a station is specified
that does not have an existing file on the server, this function will
silently fail and move on to existing files for download and cleaning from
the FTP server.</p></td>
    </tr>
    <tr>
      <th>country</th>
      <td><p>Optional. Specify a country for which to retrieve weather
data; full name or ISO codes can be used. See
<code><a href='country_list.html'>country_list</a></code> for a full list of country names and ISO
codes available.</p></td>
    </tr>
    <tr>
      <th>dsn</th>
      <td><p>Optional. Local file path to write file out to. Must be specified
if CSV or GPKG parameters are selected. If unspecified and <code>CSV</code> or
<code>GPKG</code> are set to TRUE, <code>dsn</code> will default to the current working
directory.</p></td>
    </tr>
    <tr>
      <th>filename</th>
      <td><p>Optional. The filename for resulting file(s) to be written
with no file extension. File extension will be automatically appended to file
outputs. If unspecified by the user it will default to "GSOD" followed by
the file extension(s) set using <code>CSV</code> or <code>GPKG</code>.</p></td>
    </tr>
    <tr>
      <th>max_missing</th>
      <td><p>Optional. The maximum number of days allowed to be missing
from a station's data before it is excluded from final file output.</p></td>
    </tr>
    <tr>
      <th>agroclimatology</th>
      <td><p>Optional. Logical. Only clean data for stations
between latitudes 60 and -60 for agroclimatology work, defaults to FALSE.
Set to TRUE to include only stations within the confines of these
latitudes.</p></td>
    </tr>
    <tr>
      <th>CSV</th>
      <td><p>Optional. Logical. If set to TRUE, create a comma separated value
(CSV) file and save it locally in a user specified location, if <code>dsn</code> is
not specified by the user, defaults to the current working directory.</p></td>
    </tr>
    <tr>
      <th>GPKG</th>
      <td><p>Optional. Logical. If set to TRUE, create a GeoPackage file and
save it locally in a user specified location, if <code>dsn</code> is not specified
by the user, defaults to the current working directory.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='http://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code> object of weather data or a
comma-separated value (CSV) or GeoPackage (GPKG) file saved to local disk.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Data summarise each year by station, which include vapour pressure and
relative humidity elements calculated from existing data in GSOD.</p>
<p>If the option to save locally is selected. Output may be saved as comma-
separated value (CSV) or GeoPackage (GPKG) files in a directory specified by
the user, defaulting to the current working directory.</p>
<p>When querying selected stations and electing to write files to disk, all
years queried and stations queried will be merged into one final output file.</p>
<p>All missing values in resulting files are represented as NA regardless of
which field they occur in.</p>
<p>For a complete list of the fields and desciption of the contents and units,
please refer to the <code>NA</code>.</p>
<p>For more information see the description of the data provided by NCEI,
<a href = 'http://www7.ncdc.noaa.gov/CDO/GSOD_DESC.txt'>http://www7.ncdc.noaa.gov/CDO/GSOD_DESC.txt</a>.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Some of these data are redistributed with this R package.  Originally
from these data come from the US NCEI which states that users of these data
should take into account the following: &#8220;The following data and
products may have conditions placed on their international commercial use.
They can be used within the U.S. or for non-commercial international
activities without restriction.  The non-U.S. data cannot be redistributed
for commercial purposes.  Re-distribution of these data by others must
provide this same notification.&#8221;</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Jarvis, A., Reuter, H. I, Nelson, A., Guevara, E. (2008)
Hole-filled SRTM for the globe Version 4, available from the CGIAR-CSI SRTM
90m Database <a href = 'http://srtm.csi.cgiar.org'>http://srtm.csi.cgiar.org</a></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='reformat_GSOD.html'>reformat_GSOD</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>not_run</span>({
  <span class='co'># Download weather station for Toowoomba, Queensland for 2010</span>
  <span class='no'>t</span> <span class='kw'>&lt;-</span> <span class='fu'>get_GSOD</span>(<span class='kw'>years</span> <span class='kw'>=</span> <span class='fl'>2010</span>, <span class='kw'>station</span> <span class='kw'>=</span> <span class='st'>"955510-99999"</span>)

  <span class='co'># Download data for Philippines for year 2010 and generate a yearly</span>
  <span class='co'># summary GeoPackage file, Philippines_GSOD-2010.gpkg, file in the user's</span>
  <span class='co'># home directory with a maximum of five missing days per station allowed.</span>

  <span class='fu'>get_GSOD</span>(<span class='kw'>years</span> <span class='kw'>=</span> <span class='fl'>2010</span>, <span class='kw'>country</span> <span class='kw'>=</span> <span class='st'>"Philippines"</span>, <span class='kw'>dsn</span> <span class='kw'>=</span> <span class='st'>"~/"</span>,
  <span class='kw'>filename</span> <span class='kw'>=</span> <span class='st'>"Philippines_GSOD"</span>, <span class='kw'>GPKG</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>max_missing</span> <span class='kw'>=</span> <span class='fl'>5</span>)

  <span class='co'># Download global GSOD data for agroclimatology work for years 2009 and 2010</span>
  <span class='co'># and generate yearly summary files, GSOD-agroclimatology-2010.csv and</span>
  <span class='co'># GSOD-agroclimatology-2011.csv in the user's home directory.</span>

  <span class='fu'>get_GSOD</span>(<span class='kw'>years</span> <span class='kw'>=</span> <span class='fl'>2010</span>:<span class='fl'>2011</span>, <span class='kw'>dsn</span> <span class='kw'>=</span> <span class='st'>"~/"</span>,
  <span class='kw'>filename</span> <span class='kw'>=</span> <span class='st'>"GSOD_agroclimatology_2010-2011"</span>, <span class='kw'>agroclimatology</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>CSV</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

})</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Adam H Sparks, <a href='mailto:adamhsparks@gmail.com'>adamhsparks@gmail.com</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Adam Sparks, Tomislav Hengl, Andrew Nelson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
